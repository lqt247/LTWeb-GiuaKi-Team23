
const listProduct = [
    {
        idProduct: "1",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "2",
        img: "../../assets/images/shop/do-choi-qua-tao-hoc-chu.png\" alt=\"do-choi-qua-tao-hoc-chu",
        trademarke: "VTECH",
        title: "Đồ Chơi Quả Táo Học Chữ ABC VTECH 80-139060",
        price: "969.000 Đ"
    },
    {
        idProduct: "3",
        img: "../../assets/images/shop/nat-geo-bo-khai-quat-kho-bau-vang.png\" alt=\"xe-tap-di-da-nang",
        trademarke: "STEAM",
        title: "Đồ Chơi Nat Geo Bộ Khai Quật Kho Báu Vàng STEAM RTNGDOUBDIG",
        price: "299.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/do-choi-trang-diem-dang-balo-gau-dau.png\" alt=\"xe-tap-di-da-nang",
        trademarke: "SWEET HEART",
        title: "Đồ chơi trang điểm dạng balo gấu dâu",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "5",
        img: "../../assets/images/shop/bot-nan-4-mau.png\" alt=\"bot-nan-4-mau",
        trademarke: "PLAYDOH",
        title: "Combo bột nặn 4 màu và bột nặn 4 màu mini PLAYDOH CBB5517-23241-33",
        price: "497.200Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/dung-cu-choi-cat.png\" alt=\"dung-cu-choi-cat",
        trademarke: "VTECH",
        title: "bộ cát, dụng cụ và khay chơi cát kinetic sand 6024397",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },
    {
        idProduct: "4",
        img: "../../assets/images/shop/xe-tap-di-da-nang.jpg\" alt=\"xe-tap-di-da-nang",
        trademarke: "VTECH",
        title: "Đồ Chơi Xe Tập Đi Đa Năng Có Nhạc Và Đèn Cho Bé VTECH 80-505600",
        price: "1.779.000 Đ"
    },




]

const pageSize = 8; // Số sản phẩm muốn hiển thị trên 1 trang
let currentPage = 1; // Trang hiện tại
const totalPages = Math.ceil(listProduct.length / pageSize); // Tổng số trang cần có

// --- LẤY CÁC PHẦN TỬ HTML ---
const productCardContainer = document.getElementById("list-product__body__card");
const paginationContainer = document.querySelector(".list-product__body__pagination");
const prevButton = paginationContainer.querySelector('.fa-rotate-180');
const nextButton = paginationContainer.querySelector('.fa-play');
const pageNumbersList = paginationContainer.querySelector('ul');


// const productCard = document.getElementById("list-product__body__card");
// const listCard = listProduct.map((item) =>
//         `
//     <div class="list-product__body__card__container">
//         <img src="${item.img}" alt="xe-tap-di-da-nang">
//         <div class="list-product__body__card__content">
//             <p>${item.trademarke}</p>
//             <div class="list-product__body__card__content__title">
//                 <h5>${item.title}</h5>
//             </div>
//             <h4>${item.price}</h4>
//             <div class="list-product__body__card__addCard">
//                 <button>Thêm vào giỏ hàng</button>
//                 <i class="fa-regular fa-heart"></i>
//             </div>
//             <div class="list-product__body__card__evaluate">
//                 <i class="fa-solid fa-star"></i>
//                 <i class="fa-solid fa-star"></i>
//                 <i class="fa-solid fa-star"></i>
//                 <i class="fa-solid fa-star"></i>
//                 <i class="fa-solid fa-star"></i>
//             </div>
//         </div>
//     </div>
//     `
// ).join("");
//
// productCard.innerHTML = listCard;

// --- HÀM 1: RENDER SẢN PHẨM ---
function renderProducts(page) {
    currentPage = page; // Cập nhật trạng thái trang hiện tại

    // 1. Tính toán vị trí bắt đầu và kết thúc của mảng con
    const startIndex = (currentPage - 1) * pageSize;
    const endIndex = currentPage * pageSize;

    // 2. Cắt mảng để lấy sản phẩm của trang hiện tại
    const productsForPage = listProduct.slice(startIndex, endIndex);

    // 3. Tạo chuỗi HTML và chèn vào DOM
    const listCardHTML = productsForPage.map((item) =>
        // Sử dụng template string bạn đã định nghĩa
        ` 
        <div class="list-product__body__card__container">
            <img src="${item.img}" alt="${item.title}">
            <div class="list-product__body__card__content">    
                <p>${item.trademarke}</p>
                <div class="list-product__body__card__content__title">
                    <h5>${item.title}</h5>
                </div>
                <h4>${item.price}</h4>
                <div class="list-product__body__card__addCard">
                    <button>Thêm vào giỏ hàng</button>
                    <i class="fa-regular fa-heart"></i>
                </div>
                <div class="list-product__body__card__evaluate">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                </div>
            </div>
        </div>
        `
    ).join("");

    productCardContainer.innerHTML = listCardHTML;
}


// --- HÀM 2: RENDER THANH PHÂN TRANG ---
function renderPagination() {
    pageNumbersList.innerHTML = ''; // Xóa các nút trang cũ

    // Hiển thị tối đa 5 nút trang (hoặc tùy bạn)
    const maxVisiblePages = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

    // Điều chỉnh lại startPage nếu cần
    if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
    }

    // 1. Thêm nút ... ở đầu nếu cần
    if (startPage > 1) {
        pageNumbersList.innerHTML += '<li>...</li>';
    }

    // 2. Thêm các nút số trang
    for (let i = startPage; i <= endPage; i++) {
        const li = document.createElement('li');
        li.textContent = i;
        li.classList.add('page-item');

        // Đánh dấu trang hiện tại
        if (i === currentPage) {
            li.style.backgroundColor = '#FF6C80';
            li.style.color = 'white';
        }

        // Thêm sự kiện click
        li.addEventListener('click', () => {
            renderProducts(i);
            renderPagination(); // Render lại thanh phân trang sau khi chuyển trang
        });
        pageNumbersList.appendChild(li);
    }

    // 3. Thêm nút ... ở cuối nếu cần
    if (endPage < totalPages) {
        pageNumbersList.innerHTML += '<li>...</li>';
    }

    // 4. Xử lý trạng thái nút PREV/NEXT
    prevButton.style.opacity = currentPage === 1 ? '0.5' : '1';
    prevButton.style.pointerEvents = currentPage === 1 ? 'none' : 'auto';

    nextButton.style.opacity = currentPage === totalPages ? '0.5' : '1';
    nextButton.style.pointerEvents = currentPage === totalPages ? 'none' : 'auto';
}


// --- HÀM CHUYỂN TRANG (PREV/NEXT) ---
prevButton.addEventListener('click', () => {
    if (currentPage > 1) {
        renderProducts(currentPage - 1);
        renderPagination();
    }
});

nextButton.addEventListener('click', () => {
    if (currentPage < totalPages) {
        renderProducts(currentPage + 1);
        renderPagination();
    }
});


// --- KHỞI CHẠY LẦN ĐẦU KHI TRANG LOAD XONG ---
document.addEventListener("DOMContentLoaded", () => {
    // Chỉ gọi hàm này sau khi các thành phần DOM đã được load
    renderProducts(currentPage);
    renderPagination();
});

// -------------------------kiểu xem----------------------
const type1 = document.getElementById('head__type1');
const type2 = document.getElementById('head__type2');
const type3 = document.getElementById('head__type3');

const bodyCard = document.querySelector('.list-product__body__card')

classType1 = "list-product__body__card";
classType2 = "list-product__body__card__type2";
classType3 = "list-product__body__card__type3";

type1.addEventListener('click', () => {
    type1.style.backgroundColor = '#FF6C80';
    type2.style.backgroundColor = '#E9E8E7';
    type3.style.backgroundColor = '#E9E8E7';

    if(bodyCard.className === classType2 ) {
        bodyCard.classList.replace(classType2, classType1)
    }else if (bodyCard.className === classType3){
        bodyCard.classList.replace(classType3, classType1)
    }
});
type2.addEventListener('click', () => {
    type2.style.backgroundColor = '#FF6C80';
    type1.style.backgroundColor = '#E9E8E7';
    type3.style.backgroundColor = '#E9E8E7';

    if(bodyCard.className === classType1 ) {
        bodyCard.classList.replace(classType1, classType2)
    }else if (bodyCard.className === classType3){
        bodyCard.classList.replace(classType3, classType2)
    }
});
type3.addEventListener('click', () => {
    type3.style.backgroundColor = '#FF6C80';
    type1.style.backgroundColor = '#E9E8E7';
    type2.style.backgroundColor = '#E9E8E7';

    if(bodyCard.className === classType1 ) {
        bodyCard.classList.replace(classType1, classType3)
    }else if (bodyCard.className === classType2){
        bodyCard.classList.replace(classType2, classType3)
    }
});

//--------------------Catalog----------------------
const iconPlusDoChoiLapRap = document.getElementById('iconPlusDoChoiLapRap');
const listCatalog = document.getElementById('listDoChoiLapRap');
//show
iconPlusDoChoiLapRap.addEventListener('click', () => {
    if(iconPlusDoChoiLapRap.className === 'fa-plus'){
        iconPlusDoChoiLapRap.classList.replace('fa-plus', 'fa-minus')
        listCatalog.style.display = 'block';
    }

})

